(function(t){function e(e){for(var o,n,s=e[0],d=e[1],c=e[2],l=0,p=[];l<s.length;l++)n=s[l],r[n]&&p.push(r[n][0]),r[n]=0;for(o in d)Object.prototype.hasOwnProperty.call(d,o)&&(t[o]=d[o]);u&&u(e);while(p.length)p.shift()();return i.push.apply(i,c||[]),a()}function a(){for(var t,e=0;e<i.length;e++){for(var a=i[e],o=!0,s=1;s<a.length;s++){var d=a[s];0!==r[d]&&(o=!1)}o&&(i.splice(e--,1),t=n(n.s=a[0]))}return t}var o={},r={app:0},i=[];function n(e){if(o[e])return o[e].exports;var a=o[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=t,n.c=o,n.d=function(t,e,a){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(a,o,function(e){return t[e]}.bind(null,o));return a},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],d=s.push.bind(s);s.push=e,s=s.slice();for(var c=0;c<s.length;c++)e(s[c]);var u=d;i.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"034f":function(t,e,a){"use strict";var o=a("64a9"),r=a.n(o);r.a},2687:function(t,e,a){"use strict";var o=a("4761"),r=a.n(o);r.a},"31f2":function(t,e,a){"use strict";var o=a("ec41"),r=a.n(o);r.a},4761:function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);a("cadf"),a("551c"),a("f751"),a("097d");var o=a("2b0e"),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("HelloWorld",{attrs:{msg:"D.Evolution ERP Normal User"}})],1)},i=[],n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"hello"},[[a("h1",[t._v(t._s(this.noAdm?t.msg:this.msg.replace("Normal","Super")))]),t._m(0),this.noAdm?a("button",{on:{click:t.getProducts}},[t._v("Ver produtos")]):t._e(),this.showloader?a("Loader"):t._e(),this.prodLoaded&&!this.showloader&&this.noAdm?a("div",{staticClass:"table"},[a("table",[t._m(1),t._l(t.products,function(e){return a("tr",{key:e._id},[a("td",[t._v(t._s(e.name))]),a("td",[t._v(t._s(e.description))]),a("td",[t._v(t._s(e.quantity))])])})],2),a("button",{on:{click:t.hideProducts}},[t._v("Esconder Produtos")])]):t._e(),this.noAdm?a("button",{on:{click:function(e){t.showOrderPanel=!t.showOrderPanel}}},[t._v(t._s(this.showOrderPanel?this.panelMessage[0]:this.panelMessage[1]))]):t._e(),this.showOrderPanel&&this.noAdm?a("div",{staticClass:"order-panel"},[this.emailSent?t._e():a("input",{directives:[{name:"model",rawName:"v-model",value:t.userName,expression:"userName"}],attrs:{placeholder:"insira seu nome"},domProps:{value:t.userName},on:{input:function(e){e.target.composing||(t.userName=e.target.value)}}}),this.emailSent?t._e():a("input",{directives:[{name:"model",rawName:"v-model",value:t.productName,expression:"productName"}],attrs:{placeholder:"nome do produto"},domProps:{value:t.productName},on:{input:function(e){e.target.composing||(t.productName=e.target.value)}}}),this.emailSent?t._e():a("input",{directives:[{name:"model",rawName:"v-model",value:t.newQuantity,expression:"newQuantity"}],attrs:{type:"number",placeholder:"nova quantidade"},domProps:{value:t.newQuantity},on:{input:function(e){e.target.composing||(t.newQuantity=e.target.value)}}}),this.emailSent?t._e():a("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],class:this.emailError?"hasError":"",attrs:{type:"email",placeholder:"email"},domProps:{value:t.email},on:{keyup:function(e){return t.validateEmail()},input:function(e){e.target.composing||(t.email=e.target.value)}}}),this.emailSent?t._e():a("button",{on:{click:t.sendEmail}},[t._v("Enviar")]),this.emailSent?a("Loader",{staticClass:"emailSent"}):t._e()],1):t._e(),this.noAdm?t._e():a("div",[a("h1",{attrs:{id:"pedidos"}},[t._v("Pedidos")]),a("div",{staticClass:"table"},[a("table",[t._m(2),t._l(t.orders,function(e){return a("tr",{key:e._id},[a("td",[t._v(t._s(e.name))]),a("td",[t._v(t._s(e.description))]),a("td",[t._v(t._s(e.newQuantity))]),a("td",[t._v(t._s(e.ownedQuantity))]),a("td",[t._v(t._s(e.origin))]),a("td",[a("label",{staticClass:"switch"},[a("input",{attrs:{type:"checkbox"},domProps:{checked:e.approved},on:{click:function(a){return t.changeStatus(e)}}}),a("span",{staticClass:"slider round"})])])])})],2)]),a("h1",[t._v("Fornecedores")]),a("div",{staticClass:"table"},[a("table",[t._m(3),t._l(t.suppliers,function(e){return a("tr",{key:e._id},[a("td",[t._v(t._s(e.name))]),a("td",[t._v(t._s(e.email))]),a("td",[t._v(t._s(e.relatedProd))])])})],2)]),a("div",{staticClass:"flex"},[a("button",{on:{click:t.viewHistory}},[t._v("Visualizar Histórico")]),a("button",{on:{click:t.saveUpdates}},[t._v("Salvar Alterações e Finalizar")])]),t.ordersHistory.length?a("div",[a("div",{staticClass:"container"},t._l(t.ordersHistory,function(e){return a("div",{key:e._id,staticClass:"card"},[a("h3",{staticClass:"title"},[t._v("Histórico")]),t._m(4,!0),a("div",{staticClass:"circle"},[a("svg",{attrs:{version:"1.1",xmlns:"http://www.w3.org/2000/svg"}},[a("circle",{staticClass:"stroke",attrs:{cx:"60",cy:"60",r:"50"}})]),a("div",{staticClass:"textCard"},[a("p",[t._v(" Origem: "+t._s(e.origin))]),a("p",[t._v(" Produto: "+t._s(e.name))]),a("p",[t._v(" Quantidade Anterior: "+t._s(e.ownedQuantity))]),a("p",[t._v(" Quantidade Nova: "+t._s(parseInt(e.newQuantity)+parseInt(e.ownedQuantity)))]),a("p",[t._v(" Aprovado por: "+t._s(e.approvedBy))]),a("p",[t._v(" Status: "+t._s(e.approved?"Aprovado":"Recusado"))])])])])}),0)]):t._e()])],a("button",{on:{click:t.changeProfile}},[t._v("Trocar perfil")])],2)},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ul",{staticClass:"name-list"},[a("li",[t._v("Bruna Sayuri")]),a("li",[t._v("Luana Monteiro")]),a("li",[t._v("Jonas Ribeiro")]),a("li",[t._v("Rodrigo Normando")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("th",{staticClass:"table-title"},[t._v("Nome do Produto")]),a("th",{staticClass:"table-title"},[t._v("Descrição")]),a("th",{staticClass:"table-title"},[t._v("Quantidade")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("th",{staticClass:"table-title"},[t._v("Nome do Produto")]),a("th",{staticClass:"table-title"},[t._v("Descrição")]),a("th",{staticClass:"table-title"},[t._v("Quantidade Requerida")]),a("th",{staticClass:"table-title"},[t._v("Quantidade no estoque")]),a("th",{staticClass:"table-title"},[t._v("Origem do pedido")]),a("th",{staticClass:"table-title"},[t._v("Aprovado?")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("th",{staticClass:"table-title"},[t._v("Nome do Fornecedor")]),a("th",{staticClass:"table-title"},[t._v("Contato")]),a("th",{staticClass:"table-title"},[t._v("Produtos fornecidos")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"bar"},[a("div",{staticClass:"emptybar"}),a("div",{staticClass:"filledbar"})])}],d=(a("3b2b"),a("7514"),a("7f7f"),a("cebc")),c=(a("ac6a"),a("8aa5")),u=a.n(c),l=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("img",{attrs:{alt:"Loader",src:a("ebb8")}})},p=[],h={name:"Loader"},m=h,v=(a("74ae"),a("2877")),f=Object(v["a"])(m,l,p,!1,null,null,null),_=f.exports,b=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._m(0),a("button",{on:{click:t.getProducts}},[t._v("Ver produtos")]),this.showloader?a("Loader"):t._e()],1)},g=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ul",{staticClass:"name-list"},[a("li",[t._v("Bruna Sayuri")]),a("li",[t._v("Luana Monteiro")]),a("li",[t._v("Jonas Ribeiro")]),a("li",[t._v("Rodrigo Normando")])])}],y={name:"Notification",props:{showNotification:Boolean}},w=y,N=(a("2687"),Object(v["a"])(w,b,g,!1,null,"3406c715",null)),P=N.exports,C={name:"HelloWorld",components:{Loader:_,Notification:P},props:{msg:String},mounted:function(){var t=document.createElement("script");t.setAttribute("src","https://cdn.jsdelivr.net/npm/axios@0.12.0/dist/axios.min.js"),document.getElementById("app").append(t),localStorage.getItem("orders")&&(this.orders=JSON.parse(localStorage.getItem("orders")))},data:function(){return{db:void 0,suppliers:[],orders:[],noAdm:!0,showNotification:!1,showloader:!1,prodLoaded:!1,products:[],showOrderPanel:!1,newQuantity:0,panelMessage:["Cancelar pedido","Criar pedido"],userName:"",productName:"",email:"",emailError:null,Email:null,emailSent:!1,updateCounter:0,hasUpdates:!1,updateData:{},ordersHistory:[],historyToggler:!1}},methods:{getSuppliers:function(){var t=this;this.products=[],this.suppliers=[],this.setDatabase(),this.db.collection("produto").get().then(function(e){e.docs.forEach(function(a){t.products.push(Object(d["a"])({},a.data(),{_id:a.id})),t.products.length===e.docs.length&&t.db.collection("fornecedores").get().then(function(e){e.docs.forEach(function(e){t.suppliers.push(Object(d["a"])({},e.data(),{_id:e.id,relatedProd:t.products.find(function(t){return t._id===e.data().relatedProductId}).name}))})})})})},hideProducts:function(){this.prodLoaded=!1},changeProfile:function(){this.noAdm=!this.noAdm,this.orders=[],this.noAdm||(this.getOrders(),this.getSuppliers())},getOrders:function(){var t=this;this.setDatabase(),this.db.collection("pedidos").get().then(function(e){e.docs.forEach(function(e){t.orders.push(Object(d["a"])({},e.data(),{_id:e.id}))})})},getProducts:function(){var t=this;this.products=[],this.showloader=!this.showloader,this.setDatabase(),this.db.collection("produto").get().then(function(e){e.docs.forEach(function(e){return t.products.push(Object(d["a"])({},e.data(),{_id:e.id}))}),t.prodLoaded=!0,console.log(t.products),setTimeout(function(){return t.showloader=!t.showloader},1e3)})},setDatabase:function(){this.db=u.a.firestore(),this.db.settings({})},validateEmail:function(){var t=new RegExp(/[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,10}/g);this.emailError=!t.test(this.email)},sendEmail:function(){var t=this;this.setDatabase();var e=function(){if(!t.products.find(function(e){return e.name===t.productName}))throw Error("nome do produto não foi encontrado");t.emailSent=!0,t.hasUpdates=!0,t.updateData={email:t.email,name:t.name,productName:t.productName},t.updateCounter++;var e={_idProduto:t.products.find(function(e){return e.name===t.productName})._id,name:t.productName,description:t.products.find(function(e){return e.name===t.productName?e.description:""}).description,origin:"Normal User - ".concat(t.userName),approved:!1,ownedQuantity:t.products.find(function(e){return e.name===t.productName?e.quantity:""}).quantity,newQuantity:t.newQuantity,requestedDate:new Date,approvedDate:"",approvedBy:"",_id:t.products.find(function(e){return e.name===t.productName})._id+t.products.find(function(e){return e.name===t.productName})._id};t.orders.push(e),t.setDatabase(),t.db.collection("pedidos").add(e),setTimeout(function(){t.emailSent=!1,t.userName="",t.newQuantity=0,t.productName="",t.showOrderPanel=!1,t.email=""},2e3)};this.products.length?e():this.db.collection("produto").get().then(function(a){return a.docs.forEach(function(o){t.products.push(Object(d["a"])({},o.data(),{_id:o.id})),t.products.length===a.docs.length&&e()})})},saveUpdates:function(){var t=this;this.setDatabase(),this.orders.map(function(e){t.db.collection("produto").doc(e._idProduto).update({quantity:parseInt(e.newQuantity)+parseInt(e.ownedQuantity)}),e.edited&&(t.db.collection("pedidos").doc(e._id).update({approvedBy:"Super User",approved:e.approved,approvedDate:new Date}),console.log("O Fornecedor ".concat(t.suppliers.find(function(t){return t.relatedProductId===e._idProduto}).name," será avisado da sua aprovação")))}),localStorage.clear("orders"),this.orders=[]},changeStatus:function(t){this.orders.map(function(e){t._id===e._id&&(e.approved=event.target.checked,e.edited=!0)})},viewHistory:function(){var t=this;if(this.historyToggler=!this.historyToggler,this.historyToggler)return this.setDatabase(),void this.db.collection("pedidos").get().then(function(e){e.docs.forEach(function(e){t.ordersHistory.push(Object(d["a"])({},e.data(),{_id:e.id}))})});this.ordersHistory=[]}}},E=C,S=(a("31f2"),Object(v["a"])(E,n,s,!1,null,null,null)),O=S.exports,k={name:"app",components:{HelloWorld:O}},x=k,Q=(a("034f"),Object(v["a"])(x,r,i,!1,null,null,null)),j=Q.exports,D=a("9c30"),A=(a("51de"),a("e094"),{apiKey:"AIzaSyDEyP1kVVWiFWypKQ_7g651vqXUM-iYcJI",authDomain:"pasdatabase-c3a03.firebaseapp.com",databaseURL:"https://pasdatabase-c3a03.firebaseio.com",projectId:"pasdatabase-c3a03",storageBucket:"pasdatabase-c3a03.appspot.com",messagingSenderId:"1081279896615",appId:"1:1081279896615:web:793191eea14b69d4"});u.a.initializeApp(A),o["default"].config.productionTip=!1,new o["default"]({render:function(t){return t(j)}}).$mount("#app"),o["default"].use(D["MdButton"])},"64a9":function(t,e,a){},"69af":function(t,e,a){},"74ae":function(t,e,a){"use strict";var o=a("69af"),r=a.n(o);r.a},ebb8:function(t,e,a){t.exports=a.p+"img/loader.960a1abf.gif"},ec41:function(t,e,a){}});
//# sourceMappingURL=app.3298c4e9.js.map