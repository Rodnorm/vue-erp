(function(t){function e(e){for(var o,n,s=e[0],d=e[1],l=e[2],c=0,p=[];c<s.length;c++)n=s[c],i[n]&&p.push(i[n][0]),i[n]=0;for(o in d)Object.prototype.hasOwnProperty.call(d,o)&&(t[o]=d[o]);u&&u(e);while(p.length)p.shift()();return r.push.apply(r,l||[]),a()}function a(){for(var t,e=0;e<r.length;e++){for(var a=r[e],o=!0,s=1;s<a.length;s++){var d=a[s];0!==i[d]&&(o=!1)}o&&(r.splice(e--,1),t=n(n.s=a[0]))}return t}var o={},i={app:0},r=[];function n(e){if(o[e])return o[e].exports;var a=o[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=t,n.c=o,n.d=function(t,e,a){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(a,o,function(e){return t[e]}.bind(null,o));return a},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],d=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var u=d;r.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"034f":function(t,e,a){"use strict";var o=a("64a9"),i=a.n(o);i.a},2687:function(t,e,a){"use strict";var o=a("4761"),i=a.n(o);i.a},"31f2":function(t,e,a){"use strict";var o=a("ec41"),i=a.n(o);i.a},4761:function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);a("cadf"),a("551c"),a("f751"),a("097d");var o=a("2b0e"),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("HelloWorld",{attrs:{msg:"D.Evolution ERP Normal User"}})],1)},r=[],n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"hello"},[[a("h1",[t._v(t._s(this.noAdm?t.msg:this.msg.replace("Normal","Super")))]),t._m(0),this.noAdm?a("button",{on:{click:t.getProducts}},[t._v("Ver produtos")]):t._e(),this.showloader?a("Loader"):t._e(),this.prodLoaded&&!this.showloader&&this.noAdm?a("div",{staticClass:"table"},[a("table",[t._m(1),t._l(t.products,function(e){return a("tr",{key:e._id},[a("td",[t._v(t._s(e.name))]),a("td",[t._v(t._s(e.description))]),a("td",[t._v(t._s(e.quantity))])])})],2),a("button",{on:{click:t.hideProducts}},[t._v("Esconder Produtos")])]):t._e(),this.noAdm?a("button",{on:{click:function(e){t.showOrderPanel=!t.showOrderPanel}}},[t._v(t._s(this.showOrderPanel?this.panelMessage[0]:this.panelMessage[1]))]):t._e(),this.showOrderPanel&&this.noAdm?a("div",{staticClass:"order-panel",on:{submit:t.sendEmail}},[this.emailSent?t._e():a("input",{directives:[{name:"model",rawName:"v-model",value:t.userName,expression:"userName"}],attrs:{placeholder:"insira seu nome"},domProps:{value:t.userName},on:{input:function(e){e.target.composing||(t.userName=e.target.value)}}}),this.emailSent?t._e():a("input",{directives:[{name:"model",rawName:"v-model",value:t.productName,expression:"productName"}],attrs:{placeholder:"nome do produto"},domProps:{value:t.productName},on:{input:function(e){e.target.composing||(t.productName=e.target.value)}}}),this.emailSent?t._e():a("input",{directives:[{name:"model",rawName:"v-model",value:t.newQuantity,expression:"newQuantity"}],attrs:{type:"number",placeholder:"nova quantidade"},domProps:{value:t.newQuantity},on:{input:function(e){e.target.composing||(t.newQuantity=e.target.value)}}}),this.emailSent?t._e():a("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],class:this.emailError?"hasError":"",attrs:{type:"email",placeholder:"email"},domProps:{value:t.email},on:{keyup:function(e){return t.validateEmail()},input:function(e){e.target.composing||(t.email=e.target.value)}}}),this.emailSent?t._e():a("button",{on:{click:t.sendEmail}},[t._v("Enviar")]),this.emailSent?a("Loader",{staticClass:"emailSent"}):t._e()],1):t._e(),this.noAdm?t._e():a("div",[a("h1",{attrs:{id:"pedidos"}},[t._v("Pedidos")]),a("div",{staticClass:"table"},[a("table",[t._m(2),t._l(t.orders,function(e){return a("tr",{key:e._id},[a("td",[t._v(t._s(e.name))]),a("td",[t._v(t._s(e.description))]),a("td",[t._v(t._s(e.newQuantity))]),a("td",[t._v(t._s(e.ownedQuantity))]),a("td",[t._v(t._s(e.origin))]),a("td",[a("label",{staticClass:"switch"},[a("input",{attrs:{type:"checkbox"},domProps:{checked:e.approved},on:{click:function(a){return t.changeStatus(e)}}}),a("span",{staticClass:"slider round"})])])])})],2)]),a("div",{staticClass:"flex"},[a("button",{on:{click:t.viewHistory}},[t._v("Visualizar Histórico")]),a("button",{on:{click:t.saveUpdates}},[t._v("Salvar Alterações e Finalizar")])]),t.ordersHistory.length?a("div",[a("div",{staticClass:"container"},t._l(t.ordersHistory,function(e){return a("div",{key:e._id,staticClass:"card"},[a("h3",{staticClass:"title"},[t._v("Histórico")]),t._m(3,!0),a("div",{staticClass:"circle"},[a("svg",{attrs:{version:"1.1",xmlns:"http://www.w3.org/2000/svg"}},[a("circle",{staticClass:"stroke",attrs:{cx:"60",cy:"60",r:"50"}})]),a("div",{staticClass:"textCard"},[a("p",[t._v(" Origem: "+t._s(e.origem))]),a("p",[t._v(" Produto: "+t._s(e.produto))]),a("p",[t._v(" Quantidade Anterior: "+t._s(e.quantidadeAnterior))]),a("p",[t._v(" Quantidade Nova: "+t._s(e.novaQuantidade))]),a("p",[t._v(" Aprovado por: "+t._s(e.quemAprovou))]),a("p",[t._v(" Status: "+t._s(e.status?"Aprovado":"Recusado"))])])])])}),0)]):t._e()])],a("button",{on:{click:t.changeProfile}},[t._v("Trocar perfil")])],2)},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ul",{staticClass:"name-list"},[a("li",[t._v("Bruna Sayuri")]),a("li",[t._v("Luana Monteiro")]),a("li",[t._v("Jonas Ribeiro")]),a("li",[t._v("Rodrigo Normando")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("th",{staticClass:"table-title"},[t._v("Nome do Produto")]),a("th",{staticClass:"table-title"},[t._v("Descrição")]),a("th",{staticClass:"table-title"},[t._v("Quantidade")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("th",{staticClass:"table-title"},[t._v("Nome do Produto")]),a("th",{staticClass:"table-title"},[t._v("Descrição")]),a("th",{staticClass:"table-title"},[t._v("Quantidade Requerida")]),a("th",{staticClass:"table-title"},[t._v("Quantidade no estoque")]),a("th",{staticClass:"table-title"},[t._v("Origem do pedido")]),a("th",{staticClass:"table-title"},[t._v("Aprovado?")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"bar"},[a("div",{staticClass:"emptybar"}),a("div",{staticClass:"filledbar"})])}],d=(a("7f7f"),a("7514"),a("3b2b"),a("cebc")),l=(a("ac6a"),a("8aa5")),u=a.n(l),c=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("img",{attrs:{alt:"Loader",src:a("ebb8")}})},p=[],m={name:"Loader"},v=m,h=(a("74ae"),a("2877")),f=Object(h["a"])(v,c,p,!1,null,null,null),_=f.exports,b=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._m(0),a("button",{on:{click:t.getProducts}},[t._v("Ver produtos")]),this.showloader?a("Loader"):t._e()],1)},g=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ul",{staticClass:"name-list"},[a("li",[t._v("Bruna Sayuri")]),a("li",[t._v("Luana Monteiro")]),a("li",[t._v("Jonas Ribeiro")]),a("li",[t._v("Rodrigo Normando")])])}],y={name:"Notification",props:{showNotification:Boolean}},w=y,N=(a("2687"),Object(h["a"])(w,b,g,!1,null,"3406c715",null)),C=N.exports,S={name:"HelloWorld",components:{Loader:_,Notification:C},props:{msg:String},mounted:function(){var t=document.createElement("script");t.setAttribute("src","https://cdn.jsdelivr.net/npm/axios@0.12.0/dist/axios.min.js"),document.getElementById("app").append(t),localStorage.getItem("orders")&&(this.orders=JSON.parse(localStorage.getItem("orders")))},data:function(){return{db:void 0,orders:[],noAdm:!0,showNotification:!1,showloader:!1,prodLoaded:!1,products:[],showOrderPanel:!1,newQuantity:0,panelMessage:["Cancelar pedido","Criar pedido"],userName:"",productName:"",email:"",emailError:null,Email:null,emailSent:!1,updateCounter:0,hasUpdates:!1,updateData:{},ordersHistory:[],historyToggler:!1}},methods:{hideProducts:function(){this.prodLoaded=!1},changeProfile:function(){this.noAdm=!this.noAdm},getProducts:function(){var t=this;this.products=[],this.showloader=!this.showloader,this.setDatabase(),this.db.collection("produto").get().then(function(e){e.docs.forEach(function(e){return t.products.push(Object(d["a"])({},e.data(),{_id:e.id}))}),t.prodLoaded=!0,setTimeout(function(){return t.showloader=!t.showloader},1e3)})},setDatabase:function(){this.db=u.a.firestore(),this.db.settings({})},validateEmail:function(){var t=new RegExp(/[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,10}/g);this.emailError=!t.test(this.email)},sendEmail:function(){var t=this;if(event.preventDefault(),!this.products.find(function(e){return e.name===t.productName}))throw Error("nome do produto não foi encontrado");this.emailSent=!0,axios.post("http://localhost:3000/email",{email:this.email,name:this.userName,productName:this.productName}).then(function(e){t.hasUpdates=!0,t.updateData={email:t.email,name:t.name,productName:t.productName},t.updateCounter++,t.orders.push({_id:t.products.find(function(e){return e.name===t.productName})._id,name:t.productName,description:t.products.find(function(e){return e.name===t.productName?e.description:""}).description,origin:"Normal User - ".concat(t.userName),approved:!1,ownedQuantity:t.products.find(function(e){return e.name===t.productName?e.quantity:""}).quantity,newQuantity:t.newQuantity,date:new Date}),localStorage.setItem("orders",JSON.stringify(t.orders)),setTimeout(function(){t.emailSent=!1,t.userName="",t.newQuantity=0,t.productName="",t.showOrderPanel=!1,t.email=""},2e3)})},saveUpdates:function(){var t=this;this.setDatabase(),this.orders.map(function(e){t.db.collection("produto").doc(e._id).update({quantity:e.newQuantity}),t.db.collection("pedidos").add({novaQuantidade:e.newQuantity,origem:e.origin,produto:e.name,quantidadeAnterior:e.ownedQuantity,quemAprovou:"Super User",status:e.approved,dataAprovacao:new Date,dataRequisicao:e.date})}),localStorage.clear("orders"),this.orders=[]},changeStatus:function(t){this.orders.map(function(e){t._id===e._id&&(e.approved=event.target.checked)})},viewHistory:function(){var t=this;if(this.historyToggler=!this.historyToggler,this.historyToggler)return this.setDatabase(),void this.db.collection("pedidos").get().then(function(e){e.docs.forEach(function(e){t.ordersHistory.push(Object(d["a"])({},e.data(),{_id:e.id}))})});this.ordersHistory=[]}}},P=S,E=(a("31f2"),Object(h["a"])(P,n,s,!1,null,null,null)),O=E.exports,x={name:"app",components:{HelloWorld:O}},k=x,A=(a("034f"),Object(h["a"])(k,i,r,!1,null,null,null)),Q=A.exports,j=a("9c30"),D=(a("51de"),a("e094"),{apiKey:"AIzaSyDEyP1kVVWiFWypKQ_7g651vqXUM-iYcJI",authDomain:"pasdatabase-c3a03.firebaseapp.com",databaseURL:"https://pasdatabase-c3a03.firebaseio.com",projectId:"pasdatabase-c3a03",storageBucket:"pasdatabase-c3a03.appspot.com",messagingSenderId:"1081279896615",appId:"1:1081279896615:web:793191eea14b69d4"});u.a.initializeApp(D),o["default"].config.productionTip=!1,new o["default"]({render:function(t){return t(Q)}}).$mount("#app"),o["default"].use(j["MdButton"])},"64a9":function(t,e,a){},"69af":function(t,e,a){},"74ae":function(t,e,a){"use strict";var o=a("69af"),i=a.n(o);i.a},ebb8:function(t,e,a){t.exports=a.p+"img/loader.960a1abf.gif"},ec41:function(t,e,a){}});
//# sourceMappingURL=app.0dd62196.js.map